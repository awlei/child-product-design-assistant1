# PDF导出功能使用指南

## 功能概述

儿童产品设计助手现在支持将设计方案导出为PDF文档，方便工程师保存、打印和分享。

## 支持的产品类型

目前PDF导出功能主要支持以下产品类型：
- ✅ 儿童安全座椅 - 完整支持，包含所有标准（ECE R129、GB 28007-2024、FMVSS 213、AS/NZS 1754、JIS D 1601）

## 使用步骤

### 1. 生成设计方案

在应用中：
1. 选择产品类型：儿童安全座椅
2. 选择适用标准（可多选）
3. 输入身高、体重范围
4. 点击"生成设计方案"

### 2. 导出PDF

在设计方案展示界面：
1. 点击右上角的 **Share** 图标（分享按钮）
2. 如首次使用，系统会请求存储权限，点击"允许"
3. 等待导出完成（约1-2秒）
4. 看到"导出成功"对话框，点击"确定"

### 3. 查找PDF文件

PDF文件会自动保存到设备的Downloads目录：
- **Android 10及以下**：`/storage/emulated/0/Download/`
- **Android 11及以上**：`/storage/emulated/0/Download/`

文件名格式：
```
儿童安全座椅设计方案_YYYYMMDD_HHMMSS.pdf
```

例如：
```
儿童安全座椅设计方案_20250204_143025.pdf
```

## PDF内容结构

导出的PDF包含以下内容：

### 标题
- 蓝色大标题：儿童安全座椅设计方案
- 产品类型

### 适用标准
- 蓝色背景卡片
- 所有选择的标准（🔵 蓝色标签）

### 基础适配数据
- 假人信息（身高、体重、安装方向）
- 每个标准的详细参数

### 设计参数
- 头枕高度
- 座宽
- 盒子Envelope
- 侧防面积

### 测试要求
- 正面碰撞
- 侧撞胸部压缩
- 织带强度

### 标准测试项
- 动态碰撞：正碰
- 动态碰撞：后碰
- 动态碰撞：侧碰
- 阻燃测试

## 多标准支持

PDF导出支持多标准选择，所有选择的标准内容都会包含在PDF中：

### 示例：选择4个标准

```
【适用标准】
🔵 ECE R129
🔵 FMVSS 213
🔵 AS/NZS 1754
🔵 JIS D 1601

📊 基础适配数据
- ECE R129: 0-36kg，基于身高分组
- FMVSS 213: 0-45kg，基于体重分组
- AS/NZS 1754: 0-32kg，基于体重分组
- JIS D 1601: 0-18kg，基于年龄分组
```

## 权限说明

### Android 11及以上
- 不需要请求存储权限
- 使用Scoped Storage
- PDF自动保存到Downloads目录

### Android 10及以下
- 需要请求存储权限
- 首次导出时会弹出权限请求对话框
- 允许后即可正常导出

## 技术实现

### PDF生成
- 使用Android原生 `PdfDocument` API
- A4纸张尺寸：595 x 842 pt
- 自动分页处理

### Markdown解析
- 支持标题（#、##、###）
- 支持列表项（-）
- 支持标签（🔵）
- 自动文本换行

### 文件保存
- 保存到系统Downloads目录
- 带时间戳的文件名
- 重复导出不会覆盖旧文件

## 常见问题

### Q1: 导出失败怎么办？
**A**: 请检查以下内容：
- 确保已授予存储权限
- 确保设备有足够的存储空间
- 查看错误提示信息

### Q2: 找不到PDF文件？
**A**: 请尝试：
- 使用文件管理器打开Downloads目录
- 在设置中查看Downloads权限
- 重新导出并记下完整文件名

### Q3: PDF内容为空？
**A**: 这可能发生在以下情况：
- 生成的Markdown内容为空
- 未选择任何标准
- 系统内部错误，请重试

### Q4: 可以自定义导出内容吗？
**A**: 目前版本不支持，后续版本会添加：
- 内容自定义选项
- 标题编辑功能
- 公司Logo添加
- 自定义页脚

## 后续优化计划

- [ ] 支持更多产品类型（高脚椅、儿童床等）
- [ ] 添加公司Logo
- [ ] 自定义标题和页脚
- [ ] 支持图片导出
- [ ] 支持导出为Word文档
- [ ] 支持邮件分享
- [ ] 支持云存储上传

## 技术支持

如遇到问题，请提供以下信息：
- Android版本
- 应用版本
- 错误提示信息
- 操作步骤
