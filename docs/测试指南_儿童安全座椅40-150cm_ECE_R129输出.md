# 测试指南：儿童安全座椅 40-150cm ECE R129输出

## 测试场景

### 场景1：全年龄段（40-150cm）

**操作步骤：**
1. 打开应用
2. 进入"标准适配设计"界面
3. 选择产品类型：儿童安全座椅
4. 选择标准：ECE R129（或包含"ECE R129"的标准）
5. 输入身高范围：最小身高 `40`，最大身高 `150`
6. （可选）输入设计主题：如"社交元素集成式安全座椅"
7. 点击"生成设计方案"按钮

**预期输出：**

```
【设计方案】
产品类型：儿童安全座椅
身高范围：40-150cm
适配年龄段：4-12岁（分段适配）
设计主题：社交元素集成式安全座椅
安装方式：ISOFIX 3点连接 + Top-tether上拉带（ECE R129 §5.2强制要求）

> ⚠️ 标准说明：本方案严格遵循单一标准ECE R129，不混用GB 27887-2024或FMVSS 213
> 身高40-150cm按ECE R129 Annex 19分段适配：
> - Q6假人(105-145cm) + Q10假人(145-150cm)

【测试矩阵】（ROADMATE 360格式 · ECE R129 Annex 19）

| # Sample | Pulse | Impact | Dummy | Position | Installation | Specific Installation | Product Configuration | Isofix anchors | Position of floor | Harness | Top Tether / Support leg | Dashboard | Comments | Buckle | Adjuster | Isofix | TT | QUANTITY | Testn° |
|----------|-------|--------|-------|----------|--------------|----------------------|----------------------|----------------|-------------------|---------|--------------------------|-----------|----------|--------|----------|--------|----|----------|--------|
| R129 | Frontal | Frontal | Q6 | Forward facing | Isofix 3 pts | - | Upright | yes | Low | With | With | With | - | no | no | yes | yes | n/a | - |
| R129 | Frontal | Frontal | Q6 | Forward facing | Isofix 3 pts | - | Reclined | yes | Low | With | With | With | - | no | no | yes | yes | n/a | - |
| R129 | Rear | Rear | Q6 | Forward facing | Isofix 3 pts | - | Upright | yes | Low | With | With | With | - | no | no | yes | yes | n/a | - |
| R129 | Lateral | Lateral | Q6 | Forward facing | Isofix 3 pts | - | Upright | yes | Low | With | no | With | - | no | no | yes | no | n/a | - |
| R129 | Frontal | Frontal | Q10 | Forward facing | Isofix 3 pts | - | Upright | yes | Low | With | With | With | - | no | no | yes | yes | n/a | - |
| R129 | Frontal | Frontal | Q10 | Forward facing | Isofix 3 pts | - | Reclined | yes | Low | With | With | With | - | no | no | yes | yes | n/a | - |
| R129 | Rear | Rear | Q10 | Forward facing | Isofix 3 pts | - | Upright | yes | Low | With | With | With | - | no | no | yes | yes | n/a | - |
| R129 | Lateral | Lateral | Q10 | Forward facing | Isofix 3 pts | - | Upright | yes | Low | With | no | With | - | no | no | yes | no | n/a | - |

【安全阈值】（ECE R129 §7.1 · 单一标准）

| 测试项目 | 标准要求 | 适用假人 | 单位 | 标准条款 |
|----------|----------|----------|------|----------|
| HIC36 | ≤1000 | Q6/Q10 | - | ECE R129 §7.1.2 |
| 胸部合成加速度(3ms) | ≤60g | Q6/Q10 | g | ECE R129 §7.1.3 |
| 颈部张力 | ≤2000N | Q6/Q10 | N | ECE R129 §7.1.4 |
| 颈部压缩 | ≤2500N | Q6/Q10 | N | ECE R129 §7.1.4 |
| 头部位移 | ≤550mm | Q6/Q10 | mm | ECE R129 §7.1.5 |
| 膝部位移 | ≤650mm | Q6/Q10 | mm | ECE R129 §7.1.5 |
| 胸部位移 | ≤52mm | Q6/Q10 | mm | ECE R129 §7.1.6 |

【合规声明】
本设计方案仅适配ECE R129 (i-Size) 标准，符合以下要求：
- 假人分类：Q6+Q10（分段适配）（ECE R129 §5.2）
- 动态测试：正面/后向/侧向碰撞（ECE R129 §7）
- ISOFIX连接：3点式+Top-tether（ECE R129 §6.1.2）
- 身高范围：40-150cm（ECE R129 §5.1.2）

> ⚠️ 重要提示：如需同时满足GB 27887-2024或FMVSS 213，必须在设计输入阶段明确选择"多标准适配"
```

### 场景2：高年龄段（105-150cm）

**操作步骤：**
1. 选择产品类型：儿童安全座椅
2. 选择标准：ECE R129
3. 输入身高范围：最小身高 `105`，最大身高 `150`
4. 点击"生成设计方案"按钮

**预期输出：**

```
【设计方案】
产品类型：儿童安全座椅
身高范围：105-150cm
适配年龄段：4-12岁
设计主题：社交元素
安装方式：ISOFIX 3点连接 + Top-tether上拉带（ECE R129 §5.2强制要求）

> ⚠️ 标准说明：本方案严格遵循单一标准ECE R129，不混用GB 27887-2024或FMVSS 213
> 身高105-150cm按ECE R129 Annex 19分段适配：
> - Q6假人(105-145cm) + Q10假人(145-150cm)

【测试矩阵】（ROADMATE 360格式 · ECE R129 Annex 19）
...（同上）
```

## 关键验证点

### ✅ 验证点1：假人映射正确
- 输入40-150cm → 输出显示"Q6假人(105-145cm) + Q10假人(145-150cm)"
- 测试矩阵中包含Q6和Q10两个假人的测试项

### ✅ 验证点2：测试矩阵格式正确
- 表格包含20列：# Sample, Pulse, Impact, Dummy, Position, Installation, Specific Installation, Product Configuration, Isofix anchors, Position of floor, Harness, Top Tether / Support leg, Dashboard, Comments, Buckle, Adjuster, Isofix, TT, QUANTITY, Testn°
- Q6假人：4个测试项（Frontal x2, Rear, Lateral）
- Q10假人：4个测试项（Frontal x2, Rear, Lateral）
- 总共8个测试项

### ✅ 验证点3：安全阈值正确
- HIC36 ≤1000
- 胸部合成加速度(3ms) ≤60g
- 颈部张力 ≤2000N
- 颈部压缩 ≤2500N
- 头部位移 ≤550mm
- 膝部位移 ≤650mm
- 胸部位移 ≤52mm

### ✅ 验证点4：标准引用正确
- 所有标准引用都是ECE R129
- 没有混用GB 27887-2024或FMVSS 213

### ✅ 验证点5：安装方式正确
- 显示"ISOFIX 3点连接 + Top-tether上拉带（ECE R129 §5.2强制要求）"

### ✅ 验证点6：无代码泄露
- 输出中不包含UUID、id字段、数据类名称等开发字段
- 输出为纯文本，无代码符号

## 测试脚本（可选）

如果需要在代码中测试，可以运行以下代码：

```kotlin
import com.childproduct.designassistant.utils.Roadmate360OutputGenerator

fun main() {
    // 测试场景1：40-150cm
    val output1 = Roadmate360OutputGenerator.generateOutput(
        minHeightCm = 40,
        maxHeightCm = 150,
        productType = "儿童安全座椅",
        designTheme = "社交元素集成式安全座椅"
    )
    println(output1)

    // 测试场景2：105-150cm
    val output2 = Roadmate360OutputGenerator.generateOutput(
        minHeightCm = 105,
        maxHeightCm = 150,
        productType = "儿童安全座椅",
        designTheme = "社交元素"
    )
    println(output2)
}
```

## 常见问题

### Q1: 为什么40-150cm显示的是Q6+Q10而不是Q0-Q10？

**A:** 根据ECE R129 Annex 19，40-150cm的测试主要集中在105-150cm的高年龄段，因此使用Q6（105-145cm）和Q10（145-150cm）假人进行测试。这是符合ECE R129标准要求的。

### Q2: 为什么输出中不包含GB 27887-2024或FMVSS 213？

**A:** 本方案严格遵循单一标准ECE R129，不混用其他标准。如果需要多标准适配，需要在输入阶段明确选择"多标准适配"功能。

### Q3: 测试矩阵中的"Impact"和"Dummy"字段有什么区别？

**A:**
- `Impact`：碰撞类型（Frontal/Rear/Lateral），与`Pulse`字段相同
- `Dummy`：假人类型（Q6/Q10），表示使用的测试假人

## 下一步

1. **在APK中测试**：按照上述操作步骤在APK中测试输出
2. **验证格式**：确认输出格式与预期一致
3. **反馈问题**：如果发现任何问题，请记录并提供反馈
4. **优化调整**：根据测试结果进行必要的优化调整
